## Erstellung der Repository-Schicht
- Um Datenbanktabellen fÃ¼r eine Klasse wie `Product` zu erstellen, die die Variablen der Klasse als Spalten und Daten als Zeilen enthÃ¤lt, sind CodeÃ¤nderungen erforderlich.
- Die **Repository-Schicht** ist fÃ¼r die Arbeit mit Daten verantwortlich, nicht die Service-Schicht.
- Eine neue `repository`-Paket wird erstellt, um alle Repository-Klassen und -Interfaces zu enthalten.
- FÃ¼r das Repository wird ein **Interface** (z.B. `ProductRepo`) anstelle einer Klasse erstellt, da Spring Data JPA die Implementierung der Methoden Ã¼bernimmt.
- Das Interface wird mit `@Repository` annotiert, um zusÃ¤tzliche Funktionen zu erhalten.

## Nutzung von JpaRepository
- Um Spring Data JPA die volle Kontrolle zu Ã¼berlassen, muss das Repository-Interface `JpaRepository` erweitern.
- Beim Erweitern von `JpaRepository` mÃ¼ssen zwei Typen angegeben werden: der **Klassenname** (z.B. `Product`) und der **PrimÃ¤rschlÃ¼sseltyp** (z.B. `Integer`).
- `JpaRepository` stellt automatisch eine Vielzahl von Methoden fÃ¼r Datenbankoperationen bereit, ohne dass diese manuell im Interface deklariert werden mÃ¼ssen.

Hier ist eine Mindmap zur Hierarchie von JpaRepository:



## Integration in die Service-Schicht
- Im Service wird eine Referenzvariable des Repository-Interfaces (z.B. `ProductRepo`) erstellt und mit `@Autowired` annotiert, damit Spring das Objekt instanziiert.
- Spring Data JPA ist dafÃ¼r verantwortlich, eine Klasse fÃ¼r das Interface zu erstellen und deren Objekte zu verwalten.
- Standard-CRUD-Operationen kÃ¶nnen direkt Ã¼ber die Repository-Referenz aufgerufen werden:
    - Produkte abrufen: `repo.findAll()` gibt eine Liste von Produkten zurÃ¼ck.
    - Produkt nach ID finden: `repo.findById(ID).orElse(new Product())` gibt ein optionales Objekt zurÃ¼ck.
    - Produkt hinzufÃ¼gen/speichern: `repo.save(product)` wird sowohl zum HinzufÃ¼gen neuer Produkte als auch zum Aktualisieren bestehender Produkte verwendet.
    - Produkt lÃ¶schen: `repo.deleteById(ID)` lÃ¶scht ein Produkt anhand seiner ID.

Hier ist eine Tabelle, die die CRUD-Operationen zusammenfasst:
| Operation | JpaRepository Methode | Beschreibung |
|:-------- |:-------------------- |:----------- |
| **Abrufen (Alle)** | `findAll()` | Ruft alle EntitÃ¤ten ab.    |
| **Abrufen (Einzeln)** | `findById()` | Ruft eine EntitÃ¤t anhand ihrer ID ab.    |
| **HinzufÃ¼gen/Aktualisieren** | `save()` | Speichert eine EntitÃ¤t; aktualisiert, wenn sie existiert, erstellt neu, wenn nicht.    |
| **LÃ¶schen** | `deleteById()` | LÃ¶scht eine EntitÃ¤t anhand ihrer ID.    |


## Wichtige Annotationen fÃ¼r EntitÃ¤ten
- Eine Klasse, fÃ¼r die eine Datenbanktabelle erstellt werden soll, muss mit `@Entity` annotiert werden.
- Jede EntitÃ¤tstabelle benÃ¶tigt einen PrimÃ¤rschlÃ¼ssel, der in der Klasse mit `@Id` annotiert werden muss (z.B. fÃ¼r `prodId`).

## Datenbankinteraktion und Fehlerbehebung
- Nach dem HinzufÃ¼gen von `@Entity` und `@Id` wird beim Neustart der Anwendung die entsprechende Produkttabelle in der H2-Konsole erstellt.
- Daten kÃ¶nnen Ã¼ber Postman hinzugefÃ¼gt und abgerufen werden, und die Ã„nderungen werden in der H2-Datenbank persistiert.
- Spring Data JPA generiert die SQL-Abfragen (z.B. `SELECT`, `INSERT`) automatisch im Hintergrund, ohne dass manueller Code geschrieben werden muss.

Hier ist ein Flussdiagramm fÃ¼r den Datenbankinteraktionsprozess:



## Konfiguration und Ãœberwachung
- Um die von Spring Data JPA generierten SQL-Abfragen in der Konsole anzuzeigen, kann die Eigenschaft `spring.jpa.show-sql=true` in der `application.properties` Datei hinzugefÃ¼gt werden.
- Die Standard-Anmeldeinformationen fÃ¼r die H2-Konsole kÃ¶nnen in der `application.properties` geÃ¤ndert werden, indem `spring.datasource.username` und `spring.datasource.password` festgelegt werden.
  > **ğŸ’¡ Hinweis:** Jedes Mal, wenn die Anwendung neu gestartet wird, gehen die Daten in einer In-Memory-Datenbank wie H2 verloren, es sei denn, sie ist persistent konfiguriert.